# Инструкция по работе с Git

## Часть 1
### 1 семинар
## Что такое Git?

Git - это программа, которая позволяет комфортно работать в группе над большим проектом. Ее придумал Линус Торвальдс, когда работал над созданием ОС Linux.

![](https://new-science.ru/wp-content/uploads/2020/05/8658-3.jpg)

## Зачем нужен Git?

1. Хранить различные версии проекта
2. Возвращаться к версии проекта

Контроль версий похож на сохранение в игре.

> Скачать программу для разных ОС можно по ссылке: <https://git-scm.com/>

## Основные команды Git

* __git init__ - _команда, инициализирующая репозиторий в заданной директории._
> Репозиторий - хранилище файлов, изменений. Отличается от обычной папки тем, что хранит "слепки" всех изменений.

### Виды репозиториев
1. локальный
2. удаленный

* __git --version__ - _команда, отображающая текущую установленную версию программы._
* __git status__ - _команда, показывающая состояние репозитория._
* __git add название файла__ - _команда, добавляющая файл к отслеживанию._
* __git commit -m"комментарий к изменению"__ - _команда, фиксирующая изменения с обязательным комментарием (коротким изложением того, что изменили)._
* __git log__ - *команда, выводящая журнал последних событий.* 

    * Если журнал длинный, то в конце выводится (END). Для возврата к терминалу воспользуйтесь клавишей "Q".
    * В журнале последних событий указана наименование commit (commit hash), автор и время занесения изменений и краткое сообщение. (см. картинку ниже).

![Git commit](https://linuxhint.com/wp-content/uploads/2020/12/git1.png)

* __git checkout commit hash__ - _команда, позволяющая перейти к нужной версии проекта._ 
* __git checkout master__ - _команда для перехода к актуальной версии проекта._

## Работа в терминале. Правила

### Правило четырех

1. Внести изменения
2. Сохранить
3. Добавить файл к системе отслеживания версий (git add)
4. Создать контрольную точку / Зафиксировать изменения (git commit)

>Принято первое сохранение записывать так: git commit -m"initial commit"

## 2 часть
### 2 семинар

### Создание веток

* *git branch <branch_name>* - команда, которая создает новую ветку.

**_NB_** Указанная команда только создает ветку, но не переходит на нее! Для перехода на ветку используйте команду git checkout (см.ниже).

* *git branch* - показывает название веток. И (*) показывает активную ветку.

* _git checkout <branch_name>_ - команда, позволяющая переключаться с одной ветки на другую.

* git checkout -b <newbranchname> - команда, которая позволяет создать ветку и автоматически перейти на неею

> Команда git log не показывает все ветки по умолчанию. Она отображает историю коммитов только для текущей ветки.
> Команда git log не показывает все ветки по умолчанию. Она отображает историю коммитов только для текущей ветки. Для просмотра истории коммитов другой ветки необходимо явно указать её имя: git log <branch_name>.

* git log --all - команда, позволяющая посмотреть историю по всем веткам.

>Переключение веток меняет файлы в рабочем каталоге

Важно запомнить, что при переключении веток в Git происходит изменение файлов в рабочем каталоге. Если вы переключаетесь на старую ветку, то рабочий каталог будет выглядеть так же, как выглядел на момент последнего коммита в ту ветку. Если Git по каким-то причинам не может этого сделать — он не позволит вам переключиться вообще.

### Слияние веток

* *git merge <branch_name>* - команда, осуществляющая слияние текущей ветки с указанной (branch_name)

__*NB*__ Перед слиянием веток необходимо убедиться в том, что базовая и принимаемая ветка указаны верно!

#### Виды слияний

1. **fast-forward** - ветка _master_ "отстала" от другой ветки и при слиянии происходит обновление ветки _master_.
2. **'ort' strategy** - слияние происходит по этой стратегии, когда работа ведется паралельно на 2 ветках (основной и дополнительной) и при их слиянии не происходит конфликта, так как области правки в документе разные и не влияют друг на друга. При этом слияние происходит автоматически.
3. **recursive** - стратегия слияния при которой последний коммит, на котором мы находимся, не является прямым родителем ветки, с которой мы выполняем слияние, Git выполняет простое трёхстороннее слияние, используя последние коммиты объединяемых веток и общего для них родительского коммита.

4. **conflict** - возникает, когда одну и ту же область форматируют в 2 разных ветках и потом их сливают в одну. В таком случае Git не может автоматически совершить слияние.

### Конфликты

При конфликтах слияние не происходит автоматически. Необходимо вручную выбирать правки в самом документе и далее производить его фиксацию с помощью команды git commit.

Обычно конфликты возникают, когда два человека изменяют одни и те же строки в файле или один разработчик удаляет файл, который в это время изменяет другой разработчик. В таких случаях Git не может автоматически определить, какое изменение является правильным. 

## Работа с удаленным репозиторием

Существует несколько сайтов для хранения удаленных репозиториев. Самый распространенный - GitHub. 

* __git clone <ссылка на удаленный репозиторий>__ - команда, позволяющая копировать удаленный репозиторий в локальный.

* __git push__ - команда, которая отправляет все внесенные локально изменения на удаленный репозиторий

* __git pull__ - команда, которая "перетаскивает" изменения с удаленного репозитория в локальный.

Удаленные репозитории полезны для работы в команде. Также для того, чтобы можно было поучаствовать в чужих проектах. Для этого на GitHub сужествует кнопка **Fork**. С помощью нее можно клонировать чужой репозиторий проекта, сохраняя связь с первоисточником.
> Рекомендуется делать Fork только основной ветки (main / master), так как в ней накоплены все работающие и основные изменения, которые одобрены первоисточником. 

### Порядок работы при команде Fork

1. Переходим по ссылке в / находим нужный репозиторий.
2. Нажимаем кнопку Fork. В нашем аккаунте создается его копия.
3. Клонируем репозиторий в локальную папку. 
4. Создаем ветку и производим в ней все необходимые изменения.
5. Отправляем ветку в удаленный репозиторий (git push).
6. Создаем pull request - предлагаем первоисточнику свои правки.

